@using BusinessLogic.Models

@inject BusinessLogic.Services.IBoardGameService BoardGameService

<DataGrid TItem="BoardGame"
          Data="@Games"
          ShowPager
          Striped
          PageSize="6"
          >
    <DataGridColumns>
        <DataGridColumn Caption="Название" Editable >
            <DisplayTemplate>
                @{
                    var game = context as BoardGame;
                    var link = "/game/" + game?.ID.ToString();
                    var title = game?.Title;
                }
                <Link To="@link" TextColor="TextColor.Dark">@title</Link>
            </DisplayTemplate>
        </DataGridColumn>
        <DataGridColumn Field="@nameof(BoardGame.Producer)" Caption="Производитель" Editable />
        <DataGridColumn Field="@nameof(BoardGame.Year)" Caption="Год" Editable />
        <DataGridColumn Caption="Возраст">
            <DisplayTemplate>
                @{
                    var game = context as BoardGame;

                    if (game?.MaxAge != 150)
                    {
                        @($"{game?.MinAge}-{game?.MaxAge}")
                    }
                    else
                    {
                        @($"{game?.MinAge}+")
                    }
                }
            </DisplayTemplate>
        </DataGridColumn>
        <DataGridColumn Caption="Количество игроков">
            <DisplayTemplate>
                @{
                    var game = context as BoardGame;

                    if (game?.MaxPlayerNum == game?.MinPlayerNum)
                    {
                        @($"{game?.MaxPlayerNum}")
                    }
                    else if (game?.MaxPlayerNum == 100)
                    {
                        @($"{game?.MinPlayerNum}+")
                    }
                    else
                    {
                        @($"{game?.MinPlayerNum}-{game?.MaxPlayerNum}")
                    }
                }
            </DisplayTemplate>
        </DataGridColumn>
        <DataGridColumn Caption="Длительность партии">
            <DisplayTemplate>
                @{
                    var game = context as BoardGame;

                    if (game?.MaxDuration == game?.MinDuration)
                    {
                        @($"{game?.MaxDuration}")
                    }
                    else if (game?.MaxDuration == 1440)
                    {
                        @($"{game?.MinDuration}+")
                    }
                    else
                    {
                        @($"{game?.MinDuration}-{game?.MaxDuration}")
                    }
                }
            </DisplayTemplate>
        </DataGridColumn>
    </DataGridColumns>
    <NextPageButtonTemplate><Icon Name="IconName.StepForward" /></NextPageButtonTemplate>
    <PreviousPageButtonTemplate><Icon Name="IconName.StepBackward" /></PreviousPageButtonTemplate>
    <LastPageButtonTemplate><Icon Name="IconName.Forward" /></LastPageButtonTemplate>
    <FirstPageButtonTemplate><Icon Name="IconName.Backward" /></FirstPageButtonTemplate>
    <TotalItemsTemplate><Badge Color="Color.Primary">Всего @context.TotalItems игра</Badge></TotalItemsTemplate>
</DataGrid>

@code {
    [Parameter]
    public List<BoardGame> Games { get; set; } = new List<BoardGame>();
}
